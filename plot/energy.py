results = [['50% (2:4)', 'N:M:8', 0.5, 0.7452422408124681], ['60% (2:5)', 'N:M:8', 0.6, 0.6390728150402603], ['2:7', 'N:M:8', 0.7142857142857143, 0.49396126645584154], ['75% (2:8)', 'N:M:8', 0.75, 0.4426668418329253], ['80% (2:10)', 'N:M:8', 0.8, 0.36921371961284843], ['1:5', 'N:M:8', 0.8, 0.39331118920922764], ['90% (2:20)', 'N:M:8', 0.9, 0.20630170568144365], ['1:10', 'N:M:8', 0.9, 0.2294334859687372], ['1:16', 'N:M:8', 0.9375, 0.1547155505647074], ['95% (2:40)', 'N:M:8', 0.95, 0.1139667176525598], ['50% (2:4)', '16:N:M', 0.5, 0.7452422408124681], ['60% (2:5)', '16:N:M', 0.6, 0.6284100429792406], ['2:7', '16:N:M', 0.7142857142857143, 0.4760931706296611], ['75% (2:8)', '16:N:M', 0.75, 0.42387499991706146], ['80% (2:10)', '16:N:M', 0.8, 0.350140431585775], ['1:5', '16:N:M', 0.8, 0.3885752073203572], ['90% (2:20)', '16:N:M', 0.9, 0.1911241133511476], ['1:10', '16:N:M', 0.9, 0.21825893554080733], ['1:16', '16:N:M', 0.9375, 0.1443978029525562], ['95% (2:40)', '16:N:M', 0.95, 0.10375337785096593], ['50% (2:4)', '32:N:M', 0.5, 0.7452422408124681], ['60% (2:5)', '32:N:M', 0.6, 0.620478840854345], ['2:7', '32:N:M', 0.7142857142857143, 0.46315645996195065], ['75% (2:8)', '32:N:M', 0.75, 0.41034634483089394], ['80% (2:10)', '32:N:M', 0.8, 0.33641310308069866], ['1:5', '32:N:M', 0.8, 0.38392642941306887], ['90% (2:20)', '32:N:M', 0.9, 0.18045506165558464], ['1:10', '32:N:M', 0.9, 0.20944256560938473], ['1:16', '32:N:M', 0.9375, 0.13663589029625373], ['95% (2:40)', '32:N:M', 0.95, 0.09673696445025425], ['50% (2:4)', '64:N:M', 0.5, 0.7452422408124681], ['60% (2:5)', '64:N:M', 0.6, 0.6147900606797532], ['2:7', '64:N:M', 0.7142857142857143, 0.4543016539277763], ['75% (2:8)', '64:N:M', 0.75, 0.40105338618273767], ['80% (2:10)', '64:N:M', 0.8, 0.32704971773872116], ['1:5', '64:N:M', 0.8, 0.3802540754354251], ['90% (2:20)', '64:N:M', 0.9, 0.17331256978095783], ['1:10', '64:N:M', 0.9, 0.20326169905394106], ['1:16', '64:N:M', 0.9375, 0.13123860364814066], ['95% (2:40)', '64:N:M', 0.95, 0.09208037254488802], ['50% (2:4)', '128:N:M', 0.5, 0.7452422408124681], ['60% (2:5)', '128:N:M', 0.6, 0.6109170664542681], ['2:7', '128:N:M', 0.7142857142857143, 0.44830784939152], ['75% (2:8)', '128:N:M', 0.75, 0.39465695043695354], ['80% (2:10)', '128:N:M', 0.8, 0.3206905569557166], ['1:5', '128:N:M', 0.8, 0.3776692593737408], ['90% (2:20)', '128:N:M', 0.9, 0.16833488120400641], ['1:10', '128:N:M', 0.9, 0.1989424716281372], ['1:16', '128:N:M', 0.9375, 0.12750053862676666], ['95% (2:40)', '128:N:M', 0.95, 0.08865169208425762], ['50% (2:4)', 'vw_v2', 0.5, 0.7154961374615767], ['60% (2:5)', 'vw_v2', 0.6, 0.6158680853608113], ['2:7', 'vw_v2', 0.7142857142857143, 0.4832291878198565], ['75% (2:8)', 'vw_v2', 0.75, 0.4370694450029866], ['80% (2:10)', 'vw_v2', 0.8, 0.36800158217775214], ['1:5', 'vw_v2', 0.8, 0.36800158217775214], ['90% (2:20)', 'vw_v2', 0.9, 0.21049309290739632], ['1:10', 'vw_v2', 0.9, 0.21049309290739632], ['1:16', 'vw_v2', 0.9375, 0.14196300039060808], ['95% (2:40)', 'vw_v2', 0.95, 0.11738599092900438], ['50% (2:4)', 'vw_4', 0.5, 0.6548478959302141], ['60% (2:5)', 'vw_4', 0.6, 0.5538366522947596], ['2:7', 'vw_4', 0.7142857142857143, 0.4253527746713119], ['75% (2:8)', 'vw_4', 0.75, 0.38189835834707697], ['80% (2:10)', 'vw_4', 0.8, 0.31801539708560234], ['1:5', 'vw_4', 0.8, 0.31801539708560234], ['90% (2:20)', 'vw_4', 0.9, 0.17693656272781177], ['1:10', 'vw_4', 0.9, 0.17693656272781177], ['1:16', 'vw_4', 0.9375, 0.1176625280500501], ['95% (2:40)', 'vw_4', 0.95, 0.09670730881395752], ['50% (2:4)', 'vw_8', 0.5, 0.6128620365946519], ['60% (2:5)', 'vw_8', 0.6, 0.5115260778994795], ['2:7', 'vw_8', 0.7142857142857143, 0.3863070255893318], ['75% (2:8)', 'vw_8', 0.75, 0.3448696050796669], ['80% (2:10)', 'vw_8', 0.8, 0.2846545612312667], ['1:5', 'vw_8', 0.8, 0.2846545612312667], ['90% (2:20)', 'vw_8', 0.9, 0.15482742344474618], ['1:10', 'vw_8', 0.9, 0.15482742344474618], ['1:16', 'vw_8', 0.9375, 0.10167742962514285], ['95% (2:40)', 'vw_8', 0.95, 0.08312047847638042], ['50% (2:4)', 'vw_16', 0.5, 0.5839241044193711], ['60% (2:5)', 'vw_16', 0.6, 0.4827102416204784], ['2:7', 'vw_16', 0.7142857142857143, 0.3600790171281656], ['75% (2:8)', 'vw_16', 0.75, 0.32010246674731696], ['80% (2:10)', 'vw_16', 0.8, 0.26245735792358343], ['1:5', 'vw_16', 0.8, 0.26245735792358343], ['90% (2:20)', 'vw_16', 0.9, 0.14033219189634646], ['1:10', 'vw_16', 0.9, 0.14033219189634646], ['1:16', 'vw_16', 0.9375, 0.09121609395164139], ['95% (2:40)', 'vw_16', 0.95, 0.07425050568072376], ['50% (2:4)', 'vw_32', 0.5, 0.5648643412588263], ['60% (2:5)', 'vw_32', 0.6, 0.46377761648700727], ['2:7', 'vw_32', 0.7142857142857143, 0.34305558766894106], ['75% (2:8)', 'vw_32', 0.75, 0.30402051611602793], ['80% (2:10)', 'vw_32', 0.8, 0.24814083977365062], ['1:5', 'vw_32', 0.8, 0.24814083977365062], ['90% (2:20)', 'vw_32', 0.9, 0.13100427451019536], ['1:10', 'vw_32', 0.9, 0.13100427451019536], ['1:16', 'vw_32', 0.9375, 0.08462231224494485], ['95% (2:40)', 'vw_32', 0.95, 0.06864357048224135], ['50% (2:4)', 'ideal', 0.5, 0.7984726412199761], ['60% (2:5)', 'ideal', 0.6, 0.7044601613823424], ['2:7', 'ideal', 0.7142857142857143, 0.5690199608965972], ['75% (2:8)', 'ideal', 0.75, 0.5195707535665718], ['80% (2:10)', 'ideal', 0.8, 0.4436358486847886], ['1:5', 'ideal', 0.8, 0.4436358486847886], ['90% (2:20)', 'ideal', 0.9, 0.262026542806681], ['1:10', 'ideal', 0.9, 0.262026542806681], ['1:16', 'ideal', 0.9375, 0.17948164721117402], ['95% (2:40)', 'ideal', 0.95, 0.14930649848810096], ['50% (2:4)', '1:N:M', 0.5, 0.7445902962632052], ['60% (2:5)', '1:N:M', 0.6, 0.6565712892075499], ['2:7', '1:N:M', 0.7142857142857143, 0.5311649494591315], ['75% (2:8)', '1:N:M', 0.75, 0.4847877867411465], ['80% (2:10)', '1:N:M', 0.8, 0.4158015699939441], ['1:5', '1:N:M', 0.8, 0.3949112874843234], ['90% (2:20)', '1:N:M', 0.9, 0.24948028322715773], ['1:10', '1:N:M', 0.9, 0.2368998529570254], ['1:16', '1:N:M', 0.9375, 0.16323733454584782], ['95% (2:40)', '1:N:M', 0.95, 0.14507384708042492]]


import pandas as pd
import seaborn as sns
import numpy as np
import matplotlib.pyplot as plt
sns.set_theme()

SMALL_SIZE = 14
MEDIUM_SIZE = 14
BIGGER_SIZE = 22

plt.rc('font', size=SMALL_SIZE)          # controls default text sizes
plt.rc('axes', titlesize=SMALL_SIZE)     # fontsize of the axes title
plt.rc('axes', labelsize=MEDIUM_SIZE)    # fontsize of the x and y labels
plt.rc('xtick', labelsize=SMALL_SIZE)    # fontsize of the tick labels
plt.rc('ytick', labelsize=SMALL_SIZE)    # fontsize of the tick labels
plt.rc('legend', fontsize=SMALL_SIZE)    # legend fontsize
plt.rc('figure', titlesize=BIGGER_SIZE)  # fontsize of the figure title

df = pd.DataFrame(results, columns=['density', 'name', 'sparsity', 'energy'])

df = df[(df.density=='50% (2:4)') | (df.density=='60% (2:5)') | (df.density=='75% (2:8)') | (df.density=='80% (2:10)')| (df.density=='90% (2:20)') | (df.density=='95% (2:40)')]

sns.light_palette("seagreen", as_cmap=True)
pal = sns.color_palette("crest", n_colors=6)
pal2 = sns.color_palette("flare", 5)
pal3 = sns.color_palette("ch:start=.2,rot=-.3", 5)

pruners = ['ideal', '1:N:M', '16:N:M', '32:N:M', '64:N:M', '128:N:M', 'vw_4', 'vw_8', 'vw_16', 'vw_32']

colors = {'ideal':'k',
          '1:N:M':pal.as_hex()[0],
          '16:N:M':pal.as_hex()[2],
          '32:N:M':pal.as_hex()[3],
          '64:N:M':pal.as_hex()[4],
          '128:N:M':pal.as_hex()[5],
          'vw_4':pal2.as_hex()[3],
          'vw_8':pal2.as_hex()[2],
          'vw_16':pal2.as_hex()[1],
          'vw_32':pal2.as_hex()[0]}

df['sparsity'] = df['sparsity'].astype({'sparsity':'string'})
df['density'] = df['density'].astype({'density':'string'})
df['name'] = df['name'].astype('category')
df['name'] = df.name.cat.set_categories(pruners)
df['name'] = df['name'].astype('category')

mapping = {pruner: i for i, pruner in enumerate(pruners)}

#g = sns.catplot(data=df, kind='bar', x='density', y='energy', hue='name', aspect=1.7)
g = sns.catplot(data=df, kind='bar', x='density', y='energy', hue='name', palette=colors, aspect=1.7)
g._legend.remove()
plt.xlabel('sparsity [%] (N:M)')
plt.ylabel('Energy')
plt.legend()
plt.title('BERT-base encoder.layer.8.attention.self.query.weight: 768x768')
plt.savefig('result/energy.pdf')